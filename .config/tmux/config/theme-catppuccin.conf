###############################################################################
# Catppuccin Mocha Theme - Premium Dark Theme
###############################################################################

# Base colors - Catppuccin Mocha
base="#1e1e2e"         # Main background
mantle="#181825"       # Darker background 
crust="#11111b"        # Darkest background
surface0="#313244"     # Surface
surface1="#45475a"     # Surface highlight
surface2="#585b70"     # Surface bright

# Text colors
text="#cdd6f4"         # Main text
subtext1="#bac2de"     # Subtext 1
subtext0="#a6adc8"     # Subtext 0
overlay2="#9399b2"     # Overlay 2
overlay1="#7f849c"     # Overlay 1
overlay0="#6c7086"     # Overlay 0

# Accent colors
lavender="#b4befe"     # Lavender
blue="#89b4fa"         # Blue
sapphire="#74c7ec"     # Sapphire
sky="#89dceb"          # Sky
teal="#94e2d5"         # Teal
green="#a6e3a1"        # Green
yellow="#f9e2af"       # Yellow
peach="#fab387"        # Peach
marmalade="#eba0ac"    # Marmalade
red="#f38ba8"          # Red
mauve="#cba6f7"        # Mauve
pink="#f5c2e7"         # Pink
flamingo="#f2cdcd"     # Flamingo
rosewater="#f5e0dc"    # Rosewater

# Mode indicator configuration with Catppuccin colors
set -g @mode_indicator_prefix_prompt " WAIT "
set -g @mode_indicator_prefix_mode_style "bg=$yellow,fg=$crust,bold"
set -g @mode_indicator_copy_prompt " COPY "
set -g @mode_indicator_copy_mode_style "bg=$sky,fg=$crust,bold"
set -g @mode_indicator_sync_prompt " SYNC "
set -g @mode_indicator_sync_mode_style "bg=$red,fg=$crust,bold"
set -g @mode_indicator_empty_prompt " TMUX "
set -g @mode_indicator_empty_mode_style "bg=$surface0,fg=$lavender,bold"

# Online status with custom icons
set -g @route_to_ping "1.1.1.1"
set -g @online_icon "#[fg=$green]󰖩 "
set -g @offline_icon "#[fg=$red]󰖪 "

# Status bar configuration
set -g status on
set -g status-justify left
set -g status-position bottom
set -g status-left-length 120
set -g status-right-length 120
set -g status-style "bg=$mantle,fg=$text"

# Window styles with improved contrast for better text visibility
set -g window-style "fg=$subtext0,bg=$mantle"
set -g window-active-style "fg=$text,bg=$base"

# Pane borders with enhanced visibility
set -g pane-border-style "fg=$surface1"
set -g pane-active-border-style "fg=$lavender,bold"
set -g pane-border-lines heavy
set -g pane-border-indicators both
set -g pane-border-status top
set -g pane-border-format " #[fg=$mauve,bold]#{?pane_active,󰄯 ,󰄰 }#[fg=#{?pane_active,$text,$subtext1},bold]#P: #{pane_title} "

# Additional pane highlighting
set -g display-panes-colour "$overlay0"
set -g display-panes-active-colour "$lavender"
set -g display-panes-time 2000

# Message and command styling
set -g message-style "bg=$lavender,fg=$crust,bold"
set -g message-command-style "bg=$surface1,fg=$sky"

# Window status separator (invisible)
setw -g window-status-separator ""

#################################### STATUS BAR FORMAT ####################################

# Left side: Mode + Session + Branch icon
set -g status-left "#{tmux_mode_indicator}#[bg=$surface0,fg=$mauve,bold] 󰄛 #S #[bg=$mantle,fg=$surface0]"

# Right side: Online status + Time + Date
set -g status-right "#[fg=$surface0,bg=$mantle]#[fg=$subtext1,bg=$surface0]#{online_status}#[fg=$surface1,bg=$surface0]#[fg=$yellow,bg=$surface1] 󰥔 %H:%M #[fg=$surface2,bg=$surface1]#[fg=$sky,bg=$surface2]  %a %d %b #[fg=$mantle,bg=$surface2]"

# Window status formats with Powerline symbols - improved contrast
setw -g window-status-format "#[fg=$mantle,bg=$surface0]#[fg=$subtext1,bg=$surface0] #I  #W #[fg=$surface0,bg=$mantle]"
setw -g window-status-current-format "#[fg=$mantle,bg=$lavender]#[fg=$crust,bg=$lavender,bold] #I  #W #[fg=$lavender,bg=$mantle]"

# Activity and bell notifications
setw -g monitor-activity on
set -g visual-activity off
setw -g window-status-activity-style "fg=$peach,bg=$surface0,bold"
setw -g window-status-bell-style "fg=$red,bg=$surface0,bold,blink"

# Selection colors
set -g mode-style "bg=$surface2,fg=$text"

# Clock mode
set -g clock-mode-colour "$lavender"
set -g clock-mode-style 24

# Copy mode highlighting
set -g copy-mode-match-style "bg=$yellow,fg=$crust"
set -g copy-mode-current-match-style "bg=$peach,fg=$crust,bold"
set -g copy-mode-mark-style "bg=$pink,fg=$crust"

#################################### ENHANCED FEATURES ####################################

# Display pane numbers with style
set -g display-panes-colour "$overlay0"
set -g display-panes-active-colour "$lavender"
set -g display-panes-time 2000

# Popup styling (tmux 3.2+)
set -g popup-style "bg=$mantle,fg=$text"
set -g popup-border-style "fg=$lavender"
set -g popup-border-lines "rounded"

# Menu styling (tmux 3.0+)
set -g menu-style "bg=$surface0,fg=$text"
set -g menu-selected-style "bg=$lavender,fg=$crust"
set -g menu-border-style "fg=$lavender"

# True color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Custom aliases for convenience
set -g command-alias[0] p='display-popup -E -w 80% -h 80%'
set -g command-alias[1] h='split-window -h'
set -g command-alias[2] v='split-window -v'
set -g command-alias[3] reload='source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"'