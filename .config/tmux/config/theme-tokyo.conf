###############################################################################
# Modern Dark Theme - Tokyo Night inspired with enhancements
###############################################################################

# Color Palette - Tokyo Night Storm variant with custom tweaks
bg="#1a1b26"           # Deep dark background
bg_dark="#0f1115"       # Much darker background for inactive panes
bg_dim="#13161b"        # Even more dimmed for maximum contrast
bg_highlight="#292e42"  # Subtle highlight for active pane
bg_visual="#32344a"     # Visual selection
fg="#c0caf5"           # Primary foreground - soft blue-white
fg_dark="#6c7086"      # More dimmed foreground for inactive panes
fg_gutter="#3b4261"    # Gutter/border color

# Accent Colors
blue="#7aa2f7"         # Bright blue
cyan="#7dcfff"         # Bright cyan  
magenta="#bb9af7"      # Soft purple
purple="#9d7cd8"       # Deep purple
green="#9ece6a"        # Fresh green
yellow="#e0af68"       # Warm yellow
orange="#ff9e64"       # Vibrant orange
red="#f7768e"          # Soft red
pink="#ff007c"         # Hot pink

# Grays for various UI elements
gray="#565f89"         # Medium gray
gray_alt="#414868"     # Alternative gray
gray_dark="#24283b"    # Dark gray
black="#15161e"        # Almost black

# Status colors
success="#73daca"      # Success green
warning="#e0af68"      # Warning yellow
error="#db4b4b"        # Error red
info="#0db9d7"         # Info blue

# Mode indicator configuration
set -g @mode_indicator_prefix_prompt " WAIT "
set -g @mode_indicator_prefix_mode_style "bg=$yellow,fg=$bg_dark,bold"
set -g @mode_indicator_copy_prompt " COPY "
set -g @mode_indicator_copy_mode_style "bg=$cyan,fg=$bg_dark,bold"
set -g @mode_indicator_sync_prompt " SYNC "
set -g @mode_indicator_sync_mode_style "bg=$red,fg=$bg_dark,bold"
set -g @mode_indicator_empty_prompt " TMUX "
set -g @mode_indicator_empty_mode_style "bg=$bg_highlight,fg=$blue,bold"

# Online status configuration
set -g @route_to_ping "1.1.1.1"
set -g @online_icon "󰖩 "
set -g @offline_icon "󰖪 "

# Status bar configuration
set -g status on
set -g status-justify left
set -g status-position bottom
set -g status-left-length 100
set -g status-right-length 100
set -g status-style "bg=$bg_dark,fg=$fg"

# Window styles for maximum pane distinction (strong dimming for inactive panes)
set -g window-style "fg=$fg_dark,bg=$bg_dim"
set -g window-active-style "fg=$fg,bg=$bg_highlight"

# Pane borders with enhanced visibility
set -g pane-border-style "fg=$gray_alt"
set -g pane-active-border-style "fg=$blue,bold"
set -g pane-border-lines heavy
set -g pane-border-indicators both
set -g pane-border-status top
set -g pane-border-format " #[fg=$cyan,bold]#{?pane_active,● ,○ }#[fg=#{?pane_active,$fg,$fg_dark},bold]#P: #{pane_title} "

# Additional pane highlighting
set -g display-panes-colour "$gray"
set -g display-panes-active-colour "$cyan"
set -g display-panes-time 2000

# Message styling
set -g message-style "bg=$blue,fg=$bg,bold"
set -g message-command-style "bg=$bg_visual,fg=$cyan"

# Window status separator
setw -g window-status-separator ""

#################################### STATUS BAR FORMAT ####################################

# Left side: Mode indicator + Session name + Git branch (if available)
set -g status-left "#{tmux_mode_indicator}#[bg=$bg_highlight,fg=$magenta,bold]  #S #[bg=$bg_dark,fg=$gray] "

# Right side: System info + Time
set -g status-right "#[fg=$gray]#[fg=$fg_dark,bg=$bg_dark]#{online_status} #[fg=$gray]│#[fg=$yellow] 󰥔 %H:%M #[fg=$gray]│#[fg=$cyan] %d %b #[fg=$bg_dark,bg=$bg_dark] "

# Window status formats with icons
setw -g window-status-format "#[fg=$bg_dark,bg=$bg_dark]#[fg=$gray,bg=$bg_dark] #I #[fg=$gray]#W #[fg=$bg_dark,bg=$bg_dark]"
setw -g window-status-current-format "#[fg=$bg_dark,bg=$blue]#[fg=$bg,bg=$blue,bold] #I #[fg=$bg,bg=$blue]#W #[fg=$blue,bg=$bg_dark]"

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity off
setw -g window-status-activity-style "fg=$warning,bg=$bg_dark,bold"

# Bell
setw -g window-status-bell-style "fg=$error,bg=$bg_dark,bold,blink"

# Selection and mode colors
set -g mode-style "bg=$bg_visual,fg=$cyan"

# Clock mode
set -g clock-mode-colour "$blue"
set -g clock-mode-style 24

# Copy mode highlighting
set -g copy-mode-match-style "bg=$yellow,fg=$bg_dark"
set -g copy-mode-current-match-style "bg=$orange,fg=$bg_dark,bold"
set -g copy-mode-mark-style "bg=$pink,fg=$bg_dark"

#################################### CUSTOM ADDITIONS ####################################

# Display pane numbers with style
set -g display-panes-colour "$gray"
set -g display-panes-active-colour "$cyan"
set -g display-panes-time 2000

# Popup styling (for tmux 3.2+)
set -g popup-style "bg=$bg_dark,fg=$fg"
set -g popup-border-style "fg=$blue"
set -g popup-border-lines "rounded"

# Menu styling (for tmux 3.0+)
set -g menu-style "bg=$bg_visual,fg=$fg"
set -g menu-selected-style "bg=$blue,fg=$bg"
set -g menu-border-style "fg=$blue"

# Enable true color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Better visibility for command prompt
set -g command-alias[0] p='display-popup -E -w 80% -h 80%'
set -g command-alias[1] h='split-window -h'
set -g command-alias[2] v='split-window -v'
set -g command-alias[3] reload='source-file ~/.config/tmux/.brandnew_setup_tmux.conf \; display "✅ Config reloaded!"'