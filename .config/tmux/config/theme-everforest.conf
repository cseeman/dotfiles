###############################################################################
# Everforest Dark (Medium) - Nature-Inspired Dark Theme
###############################################################################

# Base colors - Everforest Dark Medium
base="#2D353B"         # Main background
mantle="#272E33"       # Darker background
crust="#1E2326"        # Darkest background
surface0="#343F44"     # Surface
surface1="#3D484D"     # Surface highlight
surface2="#475258"     # Surface bright

# Text colors
text="#D3C6AA"         # Main text
subtext1="#9DA9A0"     # Subtext
subtext0="#859289"     # Dim text
overlay2="#999F93"     # Overlay
overlay1="#7A8478"     # Comments
overlay0="#6B7571"     # Muted

# Accent colors
green="#A7C080"        # Green (strings, additions)
red="#E67E80"          # Red (errors, deletions)
orange="#E69875"       # Orange
yellow="#DBBC7F"       # Yellow (warnings)
blue="#7FBBB3"         # Blue (functions)
aqua="#83C092"         # Aqua/Cyan
purple="#D699B6"       # Purple/Magenta
accent="#A7C080"       # Primary accent (green)

# Mode indicator configuration
set -g @mode_indicator_prefix_prompt " WAIT "
set -g @mode_indicator_prefix_mode_style "bg=$yellow,fg=$crust,bold"
set -g @mode_indicator_copy_prompt " COPY "
set -g @mode_indicator_copy_mode_style "bg=$aqua,fg=$crust,bold"
set -g @mode_indicator_sync_prompt " SYNC "
set -g @mode_indicator_sync_mode_style "bg=$red,fg=$crust,bold"
set -g @mode_indicator_empty_prompt " TMUX "
set -g @mode_indicator_empty_mode_style "bg=$surface0,fg=$green,bold"

# Online status with custom icons
set -g @route_to_ping "1.1.1.1"
set -g @online_icon "#[fg=$green]󰖩 "
set -g @offline_icon "#[fg=$red]󰖪 "

# Status bar configuration
set -g status on
set -g status-justify left
set -g status-position bottom
set -g status-left-length 120
set -g status-right-length 120
set -g status-style "bg=$mantle,fg=$text"

# Window styles
set -g window-style "fg=$subtext0,bg=$mantle"
set -g window-active-style "fg=$text,bg=$base"

# Pane borders
set -g pane-border-style "fg=$surface1"
set -g pane-active-border-style "fg=$green,bold"
set -g pane-border-lines heavy
set -g pane-border-indicators both
set -g pane-border-status top
set -g pane-border-format " #[fg=$green,bold]#{?pane_active,󰄯 ,󰄰 }#[fg=#{?pane_active,$text,$subtext1},bold]#P: #{pane_title} "

# Pane highlighting
set -g display-panes-colour "$overlay0"
set -g display-panes-active-colour "$green"
set -g display-panes-time 2000

# Message and command styling
set -g message-style "bg=$green,fg=$crust,bold"
set -g message-command-style "bg=$surface1,fg=$aqua"

# Window status separator
setw -g window-status-separator ""

#################################### STATUS BAR FORMAT ####################################

# Left side: Mode + Session
set -g status-left "#{tmux_mode_indicator}#[bg=$surface0,fg=$green,bold] 󰄛 #S #[bg=$mantle,fg=$surface0]"

# Right side: Online status + Time + Date
set -g status-right "#[fg=$surface0,bg=$mantle]#[fg=$subtext1,bg=$surface0]#{online_status}#[fg=$surface1,bg=$surface0]#[fg=$yellow,bg=$surface1] 󰥔 %H:%M #[fg=$surface2,bg=$surface1]#[fg=$aqua,bg=$surface2]  %a %d %b #[fg=$mantle,bg=$surface2]"

# Window status formats
setw -g window-status-format "#[fg=$mantle,bg=$surface0]#[fg=$subtext1,bg=$surface0] #I  #W #[fg=$surface0,bg=$mantle]"
setw -g window-status-current-format "#[fg=$mantle,bg=$green]#[fg=$crust,bg=$green,bold] #I  #W #[fg=$green,bg=$mantle]"

# Activity and bell notifications
setw -g monitor-activity on
set -g visual-activity off
setw -g window-status-activity-style "fg=$orange,bg=$surface0,bold"
setw -g window-status-bell-style "fg=$red,bg=$surface0,bold,blink"

# Selection colors
set -g mode-style "bg=$surface2,fg=$text"

# Clock mode
set -g clock-mode-colour "$green"
set -g clock-mode-style 24

# Copy mode highlighting
set -g copy-mode-match-style "bg=$yellow,fg=$crust"
set -g copy-mode-current-match-style "bg=$orange,fg=$crust,bold"
set -g copy-mode-mark-style "bg=$purple,fg=$crust"

#################################### ENHANCED FEATURES ####################################

# Popup styling (tmux 3.2+)
set -g popup-style "bg=$mantle,fg=$text"
set -g popup-border-style "fg=$green"
set -g popup-border-lines "rounded"

# Menu styling (tmux 3.0+)
set -g menu-style "bg=$surface0,fg=$text"
set -g menu-selected-style "bg=$green,fg=$crust"
set -g menu-border-style "fg=$green"

# True color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Custom aliases for convenience
set -g command-alias[0] p='display-popup -E -w 80% -h 80%'
set -g command-alias[1] h='split-window -h'
set -g command-alias[2] v='split-window -v'
set -g command-alias[3] reload='source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"'
